<script>
    async function searchCategory(query) {
    if (query.length < 2) {
        document.getElementById("category-list").innerHTML = "";
        return;
    }
    const response = await fetch(`/search-categories?search=${query}`);
    const categories = await response.json();
    const autocompleteList = document.getElementById("category-list");
    autocompleteList.innerHTML = "";
    categories.forEach(category => {
        const div = document.createElement("div");
        div.className = "autocomplete-suggestion";
        div.innerText = category?.category;
        div.onclick = function() {
            document.getElementById("category").value = category?.category;
            autocompleteList.innerHTML = "";
        };
        autocompleteList.appendChild(div);
    });
}

async function searchLanguage(query) {
    if (query.length < 2) {
        document.getElementById("language-list").innerHTML = "";
        return;
    }
    const response = await fetch(`/search-languages?search=${query}`);
    const languages = await response.json();
    const autocompleteList = document.getElementById("language-list");
    autocompleteList.innerHTML = "";
    languages.forEach(language => {
        const div = document.createElement("div");
        div.className = "autocomplete-suggestion";
        div.innerText = language?.language;
        div.onclick = function() {
            document.getElementById("language").value = language?.language;
            autocompleteList.innerHTML = "";
        };
        autocompleteList.appendChild(div);
    });
}

</script>